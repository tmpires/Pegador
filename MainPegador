import lejos.hardware.Button;
import lejos.hardware.Sound;
import lejos.utility.Delay;

public class MainPegador {
	public static void main(String[] args) {
		init();
		while (!Button.ENTER.isDown()) {
			System.out.println("Aperte ENTER para inciar");
		}

		while (!Button.ESCAPE.isDown()) {
			System.out.println("Distancia: " + Reconhecimento.getDistancia());
			Navegacao.setVelocidade(300);
			Navegacao.andarFrente();

			if (Reconhecimento.getDistancia() <= 0.2 && Captura.getGarraAberta()) {
				double distancia = Reconhecimento.getDistancia();
				Navegacao.setVelocidade(100);
				Navegacao.andarGraus(distancia);
				//andar o quanto falta para chegar no alvo
				Navegacao.parar();
				if (Navegacao.getToque()) {
					Navegacao.rÃ©();
					Delay.msDelay(1800);
					Navegacao.virarEsq(87);
				} else {
					Captura.fecharGarra();
					if (!Reconhecimento.getPreto()) {
						Button.LEDPattern(2);
						Delay.msDelay(100);
						Captura.abrirGarra();
					//	System.exit(0);
					} else {
						Button.LEDPattern(1);
						Delay.msDelay(1000);
					//	System.exit(0);
					}
				}

			}

		}
		Captura.abrirGarra();
	}

	private static void init() {
		Reconhecimento reconhecimento = new Reconhecimento();
		Thread thReconhecimento = new Thread(reconhecimento);
		thReconhecimento.start();
		Navegacao navegacao = new Navegacao();
		Thread thNavegacao = new Thread(navegacao);
		thNavegacao.start();
		Sound.beepSequenceUp();
	}
}
